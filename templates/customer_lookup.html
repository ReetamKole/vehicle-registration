{% extends "base.html" %}

{% block content %}
<style>
    form label {
        display: block;
        margin-top: 15px;
        color: #2d3748;
        font-weight: 500;
    }
    form input {
        display: block;
        width: 100%;
        max-width: 400px;
        padding: 10px;
        margin-top: 5px;
        border: 1px solid #cbd5e0;
        border-radius: 6px;
        font-size: 14px;
    }
    .vehicle-details {
        background: #f7fafc;
        border: 2px solid #667eea;
        border-radius: 8px;
        padding: 25px;
        margin-top: 30px;
        max-width: 600px;
    }
    .vehicle-details h3 {
        color: #667eea;
        margin-bottom: 15px;
    }
    .detail-row {
        padding: 10px 0;
        border-bottom: 1px solid #e2e8f0;
    }
    .detail-row:last-child {
        border-bottom: none;
    }
    .detail-label {
        font-weight: 600;
        color: #4a5568;
        display: inline-block;
        width: 180px;
    }
    .detail-value {
        color: #2d3748;
    }
    .detail-value.pending {
        color: #ed8936;
        font-style: italic;
    }
</style>

<h2>Customer Vehicle Lookup</h2>

<form method="POST">
    <label>Registration Number:</label>
    <input type="text" name="registration_number" value="{{ registration_number or '' }}" placeholder="Enter registration number" required>
    
    <label>Registered Phone:</label>
    <input type="text" name="phone" value="{{ phone or '' }}" placeholder="Enter registered phone number" required>
    
    <br><br>
    <button type="submit">Search</button>
</form>

{% if vehicle %}
<div class="vehicle-details">
    <h3>Vehicle Found</h3>
    
    <div class="detail-row">
        <span class="detail-label">Registration Number:</span>
        <span class="detail-value">{{ vehicle.registration_number }}</span>
    </div>
    
    <div class="detail-row">
        <span class="detail-label">Vehicle Number:</span>
        <span class="detail-value {% if not vehicle.vehicle_no %}pending{% endif %}">
            {{ vehicle.vehicle_no if vehicle.vehicle_no else "To be allotted" }}
        </span>
    </div>
    
    <div class="detail-row">
        <span class="detail-label">Brand:</span>
        <span class="detail-value">{{ vehicle.brand }}</span>
    </div>
    
    <div class="detail-row">
        <span class="detail-label">Model:</span>
        <span class="detail-value">{{ vehicle.model }}</span>
    </div>
    
    <div class="detail-row">
        <span class="detail-label">Issue Date:</span>
        <span class="detail-value">{{ vehicle.issue_date }}</span>
    </div>
    
    <div class="detail-row">
        <span class="detail-label">Owner Name:</span>
        <span class="detail-value">{{ vehicle.owner.name }}</span>
    </div>
    
    <div class="detail-row">
        <span class="detail-label">Owner Email:</span>
        <span class="detail-value">{{ vehicle.owner.email }}</span>
    </div>
    
    <div class="detail-row">
        <span class="detail-label">Owner Phone:</span>
        <span class="detail-value">{{ vehicle.owner.phone }}</span>
    </div>
    
    <div class="detail-row">
        <span class="detail-label">Franchise:</span>
        <span class="detail-value">{{ vehicle.franchise.name }} - {{ vehicle.franchise.location }}</span>
    </div>
</div>
{% endif %}

{% endblock %}
